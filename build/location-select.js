/* location-select 
   0.2.2
   By Stephen Band
   Built 2022-06-07 12:02 */

function M(t){return t}function g(t,e){return function(){let r=t.apply(this,arguments),i=e[r]||e.default;if(!i)throw new Error('overload() no handler for "'+r+'"');return i.apply(this,arguments)}}function S(t){var e=new Map;return function(r){if(e.has(r))return e.get(r);var i=t(r);return e.set(r,i),i}}var wt=Array.prototype;function gt(t,e){return typeof t=="function"?t.apply(null,e):t}function j(t,e,o){o=o||t.length;var r=o===1?e?t:S(t):S(function(i){return j(function(){var u=[i];return u.push.apply(u,arguments),t.apply(null,u)},e,o-1)});return function i(u){return arguments.length===0?i:arguments.length===1?r(u):arguments.length>=o?t.apply(null,arguments):gt(r(u),wt.slice.call(arguments,1))}}var d=j;function x(){}var bt=g(M,{is:x,tag:x,html:function(t,e,o){e.innerHTML=o},text:function(t,e,o){e.textContent=o},children:function(t,e,o){e.innerHTML="",e.append.apply(e,o)},points:T,cx:T,cy:T,r:T,preserveAspectRatio:T,viewBox:T,default:function(t,e,o){t in e?e[t]=o:e.setAttribute(t,o)}});function T(t,e,o){e.setAttribute(t,o)}function vt(t,e){for(var o=Object.keys(e),r=o.length;r--;)bt(o[r],t,e[o[r]]);return t}var H=d(vt,!0);var C="http://www.w3.org/2000/svg",I=document.createElement("div"),D=(t,e)=>e&&typeof e;function V(t,e){let o=document.createRange();return o.selectNode(t),o.createContextualFragment(e)}var l=g(D,{string:function(t,e){let o=document.createElementNS(C,t);return o.innerHTML=e,o},object:function(t,e){let o=document.createElementNS(C,t);return typeof e.length=="number"?o.append.apply(o,e):H(o,e),o},default:t=>document.createElementNS(C,t)}),yt=g(D,{string:function(t,e){let o=document.createElement(t);return o.innerHTML=e,o},object:function(t,e){let o=document.createElement(t);return typeof e.length=="number"?o.append.apply(o,e):H(o,e),o},default:t=>document.createElement(t)}),Et=g(M,{comment:function(t,e){return document.createComment(e||"")},fragment:g(D,{string:function(t,e,o){if(o)return V(o,e);let r=document.createDocumentFragment();I.innerHTML=e;let i=I.childNodes;for(;i[0];)r.appendChild(i[0]);return r},object:function(t,e,o){let r=o?V(o):document.createDocumentFragment();return typeof e.length=="number"?r.append.apply(r,e):H(r,e),r},default:()=>document.createDocumentFragment()}),text:function(t,e){return document.createTextNode(e||"")},circle:l,ellipse:l,g:l,glyph:l,image:l,line:l,rect:l,use:l,path:l,pattern:l,polygon:l,polyline:l,svg:l,default:yt}),P=Et;function O(t,e,o){let r;typeof o!="string"&&o.input!==void 0&&o.index!==void 0&&(r=o,o=r.input.slice(o.index+o[0].length+(o.consumed||0)));let i=t.exec(o);if(!i)return;let u=e(i);return r&&(r.consumed=(r.consumed||0)+i.index+i[0].length+(i.consumed||0)),u}var ce=d(O,!0);function xt(t,e,o){throw o.input!==void 0&&o.index!==void 0&&(o=o.input),new Error('Cannot parse string "'+(o.length>128?o.length.slice(0,128)+"…":o)+'"')}function Tt(t,e,o){let r=-1;for(;++r<o.length;)e=o[r]!==void 0&&t[r]?t[r](e,o):e;return t.done?t.done(e,o):t.close?t.close(e,o):e}function Lt(t,e,o,r){let i=O(t,u=>Tt(e,o,u),r);return i===void 0?e.catch?e.catch(o,r):xt(t,e,r):i}var $=d(Lt,!0);var F=x;var p=Symbol("internals"),v=Symbol("shadow"),z=Object.defineProperties,Mt={a:HTMLAnchorElement,dl:HTMLDListElement,p:HTMLParagraphElement,br:HTMLBRElement,fieldset:HTMLFieldSetElement,hr:HTMLHRElement,img:HTMLImageElement,li:HTMLLIElement,ol:HTMLOListElement,optgroup:HTMLOptGroupElement,q:HTMLQuoteElement,textarea:HTMLTextAreaElement,td:HTMLTableCellElement,th:HTMLTableCellElement,tr:HTMLTableRowElement,tbody:HTMLTableSectionElement,thead:HTMLTableSectionElement,tfoot:HTMLTableSectionElement,ul:HTMLUListElement},At={name:{set:function(t){return this.setAttribute("name",t)},get:function(){return this.getAttribute("name")||""}},form:{get:function(){return this[p].form}},labels:{get:function(){return this[p].labels}},validity:{get:function(){return this[p].validity}},validationMessage:{get:function(){return this[p].validationMessage}},willValidate:{get:function(){return this[p].willValidate}},checkValidity:{value:function(){return this[p].checkValidity()}},reportValidity:{value:function(){return this[p].reportValidity()}}},St={},q={once:!0},Ht=0,K=!1;function kt(t){return Mt[t]||window["HTML"+t[0].toUpperCase()+t.slice(1)+"Element"]||(()=>{throw new Error('Constructor not found for tag "'+t+'"')})()}var _t=$(/^\s*<?([a-z][\w]*-[\w]+)>?\s*$|^\s*<?([a-z][\w]*)\s+is=["']?([a-z][\w]*-[\w]+)["']?>?\s*$/,{1:(t,e)=>({name:e[1]}),2:(t,e)=>({name:e[3],tag:e[2]}),catch:function(t,e){throw new SyntaxError(`dom element() – name must be of the form 'element-name' or 'tag is="element-name"' (`+e+")")}},null);function Ct(t,e){if(t.hasOwnProperty(e)){let o=t[e];delete t[e],t[e]=o}return t}function Dt(t,e,o){t._initialLoad=!0;let r=t.attachShadow({mode:e.mode||"closed",delegatesFocus:e.focusable||!1});if(o){let i=P("link",{rel:"stylesheet",href:o});r.append(i)}return t[v]=r,r}function Pt(t){var e;if(t.attachInternals){if(e=t.attachInternals(),e.setFormValue)return e}else e={shadowRoot:t.shadowRoot};return e.input=P("input",{type:"hidden",name:t.name}),t.appendChild(e.input),e.setFormValue=function(o){this.input.value=o},e}function Ot(t){t._initialAttributes={},t._n=0}function Ft(t,e,o){let r=t._initialAttributes;for(;t._n<e.length&&r[e[t._n]]!==void 0;)o[e[t._n]].call(t,r[e[t._n]]),++t._n}function Q(t,e,o){if(!t._initialAttributes)return;let r=t._initialAttributes;for(;t._n<e.length;)r[e[t._n]]!==void 0&&o[e[t._n]]&&o[e[t._n]].call(t,r[e[t._n]]),++t._n;delete t._initialAttributes,delete t._n}function Bt(t){return!!t.attribute}function Rt(t){return t.set||t.get||t.hasOwnProperty("value")}function J(t,e){return Bt(e[1])&&(t.attributes[e[0]]=e[1].attribute),Rt(e[1])&&(t.properties[e[0]]=e[1]),t}function B(t,e,o,r){let{name:i,tag:u}=_t(t),G=typeof u=="string"?kt(u):HTMLElement,{attributes:m,properties:L}=o?Object.entries(o).reduce(J,{attributes:{},properties:{}}):e.properties?Object.entries(e.properties).reduce(J,{attributes:{},properties:{}}):St;function a(){let s=Reflect.construct(G,arguments,a),c=e.construct&&e.construct.length>Ht?Dt(s,e,r||e.stylesheet):void 0,f=a.formAssociated&&Pt(s);return u&&(K=!0),e.construct&&e.construct.call(s,c,f),m&&(Ot(s),Promise.resolve(1).then(function(){Q(s,a.observedAttributes,m)})),L&&Object.keys(L).reduce(Ct,s),s}return a.prototype=Object.create(G.prototype,L),L&&L.value&&(a.formAssociated=!0,z(a.prototype,At),(e.enable||e.disable)&&(a.prototype.formDisabledCallback=function(s){return s?e.disable&&e.disable.call(this,this[v],this[p]):e.enable&&e.enable.call(this,this[v],this[p])}),e.reset&&(a.prototype.formResetCallback=function(){return e.reset.call(this,this[v],this[p])}),e.restore&&(a.prototype.formStateRestoreCallback=function(){return e.restore.call(this,this[v],this[p])})),m&&(a.observedAttributes=Object.keys(m),a.prototype.attributeChangedCallback=function(s,c,f){if(!this._initialAttributes)return m[s].call(this,f);this._initialAttributes[s]=f,Ft(this,a.observedAttributes,m)}),a.prototype.connectedCallback=function(){let s=this,c=s[v],f=s[p];if(s._initialAttributes&&Q(s,a.observedAttributes,m),s._initialLoad){let E=c.querySelectorAll('link[rel="stylesheet"]');if(E.length){let pt=0,_=E.length,N=function(dt){++pt>=E.length&&(delete s._initialLoad,e.load&&(F("element()","loaded",Array.from(E).map(mt=>mt.href).join(`
`)),e.load.call(s,c)))},ft=N;for(;_--;)E[_].addEventListener("load",N,q),E[_].addEventListener("error",ft,q);e.connect&&e.connect.call(this,c,f)}else e.connect&&e.connect.call(this,c,f),e.load&&e.load.call(this,c,f)}else e.connect&&e.connect.call(this,c,f)},e.disconnect&&(a.prototype.disconnectedCallback=function(){return e.disconnect.call(this,this[v],this[p])}),F("element()","<"+(u?u+" is="+i:i)+">"),window.customElements.define(i,a,u&&{extends:u}),u&&!K&&document.querySelectorAll('[is="'+i+'"]').forEach(s=>{o&&z(s,o),e.construct&&e.construct.apply(s);let c;for(c in m){let f=s.attributes[c];f&&m[c].call(s,f.value)}e.connect&&e.connect.apply(s)}),a}function Ut(t,e){return e[t]}var Ee=d(Ut,!0);function W(t,e){t.remove&&t.remove(e);let o;for(;(o=t.indexOf(e))!==-1;)t.splice(o,1);return e}var Le=d(W,!0);function R(t){return t&&t[Symbol.iterator]}var Gt=Object.assign;function Nt(t){return t.stop?t.stop():t()}function A(){}Gt(A.prototype,{stop:function(){let t=this.stopables;return this.stopables=void 0,t&&t.forEach(Nt),this},done:function(t){return(this.stopables||(this.stopables=[])).push(t),this}});var w=Object.assign,b=Object.create;function X(t,e){t[0]=e,e.done(t)}function y(t,e){t&&t.push(e)}function U(t){A.prototype.stop.apply(t);let e=-1,o;for(;o=t[++e];)t[e]=void 0,o.stop()}function h(t){this.input=t}w(h.prototype,A.prototype,{push:function(t){y(this[0],t)},pipe:function(t){if(this[0])throw new Error("Stream: Attempt to .pipe() a unicast stream multiple times. Create a multicast stream with stream.broadcast().");return this[0]=t,t.done(this),this.input.pipe(this),t},map:function(t){return new Y(this,t)},filter:function(t){return new Z(this,t)},split:function(t){return new et(this,t)},flatMap:function(t){return new tt(this,t)},take:function(t){return new nt(this,t)},each:function(t){return this.pipe(new it(t))},reduce:function(t,e){return this.pipe(new ot(t,e)).value},scan:function(t,e){return new rt(this,t,e)},stop:function(){return U(this),this}});function Y(t,e){this.input=t,this.fn=e}Y.prototype=w(b(h.prototype),{push:function(e){let r=this.fn(e);r!==void 0&&y(this[0],r)}});function Z(t,e){this.input=t,this.fn=e}Z.prototype=w(b(h.prototype),{push:function(e){this.fn(e)&&y(this[0],e)}});function tt(t,e){this.input=t,this.fn=e}tt.prototype=w(b(h.prototype),{push:function(e){let r=this.fn(e);if(r!==void 0)if(R(r))for(let i of r)y(this[0],i);else throw new Error("Stream: Cannot .flatMap() non-iterable values")}});function et(t,e){this.input=t,this.chunk=[],typeof n=="number"?this.n=e:this.fn=e}et.prototype=w(b(h.prototype),{fn:function(){return this.chunk.length===this.n},push:function(e){let o=this.chunk;this.fn(e)?(y(this[0],o),this.chunk=[]):o.push(e)}});function nt(t,e){this.input=t,this.count=e}nt.prototype=w(b(h.prototype),{push:function(e){this[0].push(e),--this.count||this.stop()}});var jt=0;function ot(t,e){this.fn=t,this.value=e,this.i=0,this.n=++jt}ot.prototype=w(b(h.prototype),{push:function(t){let e=this.fn;this.value=e(this.value,t,this.i++,this)}});function rt(t,e,o){this.input=t,this.fn=e,this.value=o}rt.prototype=w(b(h.prototype),{push:function(t){let e=this.fn;this.value=e(this.value,t),this[0].push(this.value)}});function it(t){this.push=t}it.prototype=w(b(h.prototype),{each:null,reduce:null,pipe:null});var It=Object.assign,Vt=/\s+/,st={fullscreenchange:"fullscreenElement"in document?"fullscreenchange":"webkitFullscreenElement"in document?"webkitfullscreenchange":"fullscreenchange"};var ut=0;window.addEventListener("click",t=>ut=t.timeStamp);function $t(t,e){return t.node.addEventListener(st[e]||e,t,t.options),t}function zt(t,e){return t.node.removeEventListener(st[e]||e,t),t}function at(t,e,o){this.types=t.split(Vt),this.options=e,this.node=o,this.select=e&&e.select}It(at.prototype,{pipe:function(t){X(this,t),this.types.reduce($t,this)},handleEvent:function(t){if(!(t.type==="click"&&t.timeStamp<=ut)){if(this.select){let e=t.target.closest(this.select);if(!e)return;t.selectedTarget=e}y(this[0],t)}},stop:function(){this.types.reduce(zt,this),U(this[0])}});function k(t,e){let o;return typeof t=="object"&&(o=t,t=o.type),new h(new at(t,o,e))}function qt(t){return/^#\S+$/.test(t)}function ct(t){let e=t.children,o=-1;for(;e[++o];){let r=e[o];if(!r.value)continue;if(new URL(r.value,window.location).href===window.location.href){t.value=r.value;break}}}var lt={construct:function(){k("change",this).map(t=>t.target.value).filter(t=>!!t).each(t=>{if(qt(t)){let e=t.slice(1);window.location.hash=e}else window.location=t}),k("popstate",window).each(()=>ct(this))},connect:function(){ct(this)}};var Ne=B('<select is="location-select">',lt);window.console&&window.console.log('%c<select is="location-select">%c registered (docs at %chttps://stephen.band/location-select/%c)',"color: #3a8ab0; font-weight: 600;","color: #888888; font-weight: 400;","color: inherit; font-weight: 400;","color: #888888; font-weight: 400;");export{Ne as default};
