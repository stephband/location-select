/* location-select 
   0.1.0
   By Stephen Band
   Built 2022-06-03 15:10 */

function x(t){return t}function b(t,e){return function(){let i=t.apply(this,arguments),r=e[i]||e.default;if(!r)throw new Error('overload() no handler for "'+i+'"');return r.apply(this,arguments)}}function _(t){var e=new Map;return function(i){if(e.has(i))return e.get(i);var r=t(i);return e.set(i,r),r}}var jt=Array.prototype;function _t(t,e){return typeof t=="function"?t.apply(null,e):t}function Y(t,e,o){o=o||t.length;var i=o===1?e?t:_(t):_(function(r){return Y(function(){var c=[r];return c.push.apply(c,arguments),t.apply(null,c)},e,o-1)});return function r(c){return arguments.length===0?r:arguments.length===1?i(c):arguments.length>=o?t.apply(null,arguments):_t(i(c),jt.slice.call(arguments,1))}}var v=Y;function f(){}var Ct=b(x,{is:f,tag:f,html:function(t,e,o){e.innerHTML=o},text:function(t,e,o){e.textContent=o},children:function(t,e,o){e.innerHTML="",e.append.apply(e,o)},points:L,cx:L,cy:L,r:L,preserveAspectRatio:L,viewBox:L,default:function(t,e,o){t in e?e[t]=o:e.setAttribute(t,o)}});function L(t,e,o){e.setAttribute(t,o)}function Bt(t,e){for(var o=Object.keys(e),i=o.length;i--;)Ct(o[i],t,e[o[i]]);return t}var C=v(Bt,!0);var N="http://www.w3.org/2000/svg",tt=document.createElement("div"),I=(t,e)=>e&&typeof e;function et(t,e){let o=document.createRange();return o.selectNode(t),o.createContextualFragment(e)}var h=b(I,{string:function(t,e){let o=document.createElementNS(N,t);return o.innerHTML=e,o},object:function(t,e){let o=document.createElementNS(N,t);return typeof e.length=="number"?o.append.apply(o,e):C(o,e),o},default:t=>document.createElementNS(N,t)}),Dt=b(I,{string:function(t,e){let o=document.createElement(t);return o.innerHTML=e,o},object:function(t,e){let o=document.createElement(t);return typeof e.length=="number"?o.append.apply(o,e):C(o,e),o},default:t=>document.createElement(t)}),Ft=b(x,{comment:function(t,e){return document.createComment(e||"")},fragment:b(I,{string:function(t,e,o){if(o)return et(o,e);let i=document.createDocumentFragment();tt.innerHTML=e;let r=tt.childNodes;for(;r[0];)i.appendChild(r[0]);return i},object:function(t,e,o){let i=o?et(o):document.createDocumentFragment();return typeof e.length=="number"?i.append.apply(i,e):C(i,e),i},default:()=>document.createDocumentFragment()}),text:function(t,e){return document.createTextNode(e||"")},circle:h,ellipse:h,g:h,glyph:h,image:h,line:h,rect:h,use:h,path:h,pattern:h,polygon:h,polyline:h,svg:h,default:Dt}),V=Ft;function z(t,e,o){let i;typeof o!="string"&&o.input!==void 0&&o.index!==void 0&&(i=o,o=i.input.slice(o.index+o[0].length+(o.consumed||0)));let r=t.exec(o);if(!r)return;let c=e(r);return i&&(i.consumed=(i.consumed||0)+r.index+r[0].length+(r.consumed||0)),c}var $e=v(z,!0);function Ut(t,e,o){throw o.input!==void 0&&o.index!==void 0&&(o=o.input),new Error('Cannot parse string "'+(o.length>128?o.length.slice(0,128)+"…":o)+'"')}function Gt(t,e,o){let i=-1;for(;++i<o.length;)e=o[i]!==void 0&&t[i]?t[i](e,o):e;return t.done?t.done(e,o):t.close?t.close(e,o):e}function Rt(t,e,o,i){let r=z(t,c=>Gt(e,o,c),i);return r===void 0?e.catch?e.catch(o,i):Ut(t,e,i):r}var nt=v(Rt,!0);var $=f;var d=Symbol("internals"),T=Symbol("shadow"),ot=Object.defineProperties,Nt={a:HTMLAnchorElement,dl:HTMLDListElement,p:HTMLParagraphElement,br:HTMLBRElement,fieldset:HTMLFieldSetElement,hr:HTMLHRElement,img:HTMLImageElement,li:HTMLLIElement,ol:HTMLOListElement,optgroup:HTMLOptGroupElement,q:HTMLQuoteElement,textarea:HTMLTextAreaElement,td:HTMLTableCellElement,th:HTMLTableCellElement,tr:HTMLTableRowElement,tbody:HTMLTableSectionElement,thead:HTMLTableSectionElement,tfoot:HTMLTableSectionElement,ul:HTMLUListElement},It={name:{set:function(t){return this.setAttribute("name",t)},get:function(){return this.getAttribute("name")||""}},form:{get:function(){return this[d].form}},labels:{get:function(){return this[d].labels}},validity:{get:function(){return this[d].validity}},validationMessage:{get:function(){return this[d].validationMessage}},willValidate:{get:function(){return this[d].willValidate}},checkValidity:{value:function(){return this[d].checkValidity()}},reportValidity:{value:function(){return this[d].reportValidity()}}},Vt={},it={once:!0},zt=0,rt=!1;function $t(t){return Nt[t]||window["HTML"+t[0].toUpperCase()+t.slice(1)+"Element"]||(()=>{throw new Error('Constructor not found for tag "'+t+'"')})()}var qt=nt(/^\s*<?([a-z][\w]*-[\w]+)>?\s*$|^\s*<?([a-z][\w]*)\s+is=["']?([a-z][\w]*-[\w]+)["']?>?\s*$/,{1:(t,e)=>({name:e[1]}),2:(t,e)=>({name:e[3],tag:e[2]}),catch:function(t,e){throw new SyntaxError(`dom element() – name must be of the form 'element-name' or 'tag is="element-name"' (`+e+")")}},null);function Kt(t,e){if(t.hasOwnProperty(e)){let o=t[e];delete t[e],t[e]=o}return t}function Zt(t,e,o){t._initialLoad=!0;let i=t.attachShadow({mode:e.mode||"closed",delegatesFocus:e.focusable||!1});if(o){let r=V("link",{rel:"stylesheet",href:o});i.append(r)}return t[T]=i,i}function Qt(t){var e;if(t.attachInternals){if(e=t.attachInternals(),e.setFormValue)return e}else e={shadowRoot:t.shadowRoot};return e.input=V("input",{type:"hidden",name:t.name}),t.appendChild(e.input),e.setFormValue=function(o){this.input.value=o},e}function Jt(t){t._initialAttributes={},t._n=0}function Wt(t,e,o){let i=t._initialAttributes;for(;t._n<e.length&&i[e[t._n]]!==void 0;)o[e[t._n]].call(t,i[e[t._n]]),++t._n}function st(t,e,o){if(!t._initialAttributes)return;let i=t._initialAttributes;for(;t._n<e.length;)i[e[t._n]]!==void 0&&o[e[t._n]]&&o[e[t._n]].call(t,i[e[t._n]]),++t._n;delete t._initialAttributes,delete t._n}function Xt(t){return!!t.attribute}function Yt(t){return t.set||t.get||t.hasOwnProperty("value")}function ut(t,e){return Xt(e[1])&&(t.attributes[e[0]]=e[1].attribute),Yt(e[1])&&(t.properties[e[0]]=e[1]),t}function q(t,e,o,i){let{name:r,tag:c}=qt(t),y=typeof c=="string"?$t(c):HTMLElement,{attributes:w,properties:M}=o?Object.entries(o).reduce(ut,{attributes:{},properties:{}}):e.properties?Object.entries(e.properties).reduce(ut,{attributes:{},properties:{}}):Vt;function p(){let u=Reflect.construct(y,arguments,p),l=e.construct&&e.construct.length>zt?Zt(u,e,i||e.stylesheet):void 0,m=p.formAssociated&&Qt(u);return c&&(rt=!0),e.construct&&e.construct.call(u,l,m),w&&(Jt(u),Promise.resolve(1).then(function(){st(u,p.observedAttributes,w)})),M&&Object.keys(M).reduce(Kt,u),u}return p.prototype=Object.create(y.prototype,M),M&&M.value&&(p.formAssociated=!0,ot(p.prototype,It),(e.enable||e.disable)&&(p.prototype.formDisabledCallback=function(u){return u?e.disable&&e.disable.call(this,this[T],this[d]):e.enable&&e.enable.call(this,this[T],this[d])}),e.reset&&(p.prototype.formResetCallback=function(){return e.reset.call(this,this[T],this[d])}),e.restore&&(p.prototype.formStateRestoreCallback=function(){return e.restore.call(this,this[T],this[d])})),w&&(p.observedAttributes=Object.keys(w),p.prototype.attributeChangedCallback=function(u,l,m){if(!this._initialAttributes)return w[u].call(this,m);this._initialAttributes[u]=m,Wt(this,p.observedAttributes,w)}),p.prototype.connectedCallback=function(){let u=this,l=u[T],m=u[d];if(u._initialAttributes&&st(u,p.observedAttributes,w),u._initialLoad){let A=l.querySelectorAll('link[rel="stylesheet"]');if(A.length){let Pt=0,R=A.length,X=function(kt){++Pt>=A.length&&(delete u._initialLoad,e.load&&($("element()","loaded",Array.from(A).map(Ht=>Ht.href).join(`
`)),e.load.call(u,l)))},Mt=X;for(;R--;)A[R].addEventListener("load",X,it),A[R].addEventListener("error",Mt,it);e.connect&&e.connect.call(this,l,m)}else e.connect&&e.connect.call(this,l,m),e.load&&e.load.call(this,l,m)}else e.connect&&e.connect.call(this,l,m)},e.disconnect&&(p.prototype.disconnectedCallback=function(){return e.disconnect.call(this,this[T],this[d])}),$("element()","<"+(c?c+" is="+r:r)+">"),window.customElements.define(r,p,c&&{extends:c}),c&&!rt&&document.querySelectorAll('[is="'+r+'"]').forEach(u=>{o&&ot(u,o),e.construct&&e.construct.apply(u);let l;for(l in w){let m=u.attributes[l];m&&w[l].call(u,m.value)}e.connect&&e.connect.apply(u)}),p}function te(t,e){return e[t]}var on=v(te,!0);var ee=Object.freeze;function ct(){return this}var S=ee({shift:f,push:f,forEach:f,join:function(){return""},map:ct,filter:ct,includes:function(){return!1},reduce:function(t,e){return e},length:0,each:f,pipe:x,start:f,stop:f,done:f,valueOf:function(){return null}});function K(){return this}function Z(t){return t&&t[Symbol.iterator]}var ne=Object.assign;function oe(t){return t.stop?t.stop():t()}function ie(t){t.forEach(oe),t.length=0}function P(){}ne(P.prototype,{stop:function(){return this.stopables&&ie(this.stopables),this},done:function(e){return(this.stopables||(this.stopables=[])).push(e),this}});var re=Object.assign;function B(t){P.prototype.stop.apply(t);let e=-1,o;for(;o=t[++e];)t[e]=void 0,B(o)}function a(){}re(a.prototype,{pipe:function(t){return this[0]=t,t},stop:function(){return this[0]&&B(this[0]),this}});var g=Object.assign,E=Object.create;function O(t,e){e!==void 0&&t[0].push(e)}function se(t,e){if(t[1]){let o=-1;for(;t[++o]&&t[o]!==e;);for(;t[o++];)t[o-1]=t[o];B(e)}else t.stop()}function s(t){this.input=t}g(s.prototype,P.prototype,{push:function(t){O(this,t)},pipe:function(t){if(this[0])throw new Error("Stream: Attempt to .pipe() a unicast stream multiple times. Create a multicast stream with stream.broadcast().");return this[0]=t,this.input.pipe(this),t},map:function(t){return new at(this,t)},filter:function(t){return new pt(this,t)},split:function(t){return new lt(this,t)},flatMap:function(t){return new ft(this,t)},take:function(t){return new ht(this,t)},each:function(t){return new wt(this,t)},reduce:function(t,e){return new dt(this,t,e)},scan:function(t,e){return new mt(this,t,e)},stop:function(){return se(this.input,this),this}});function at(t,e){this.input=t,this.fn=e}at.prototype=g(E(s.prototype),{push:function(e){let o=this.fn;O(this,o(e))}});function pt(t,e){this.input=t,this.fn=e}pt.prototype=g(E(s.prototype),{push:function(e){this.fn(e)&&O(this,e)}});function ft(t,e){this.input=t,this.fn=e}ft.prototype=g(E(s.prototype),{push:function(e){let i=this.fn(e);if(i!==void 0)if(Z(i))for(let r of i)O(this,r);else throw new Error("Stream: Cannot .flatMap() non-iterable values")}});function lt(t,e){this.input=t,this.chunk=[],typeof n=="number"?this.n=e:this.fn=e}lt.prototype=g(E(s.prototype),{fn:function(){return this.chunk.length===this.n},push:function(e){let o=this.chunk;this.fn(e)?(O(this,o),this.chunk=[]):o.push(e)}});function ht(t,e){this.input=t,this.count=e}ht.prototype=g(E(s.prototype),{push:function(e){this[0].push(e),--this.count||this.stop()}});function dt(t,e,o){return this.input=t,this.fn=e,this.value=o,this.i=0,t.pipe(this),o}dt.prototype=g(E(s.prototype),{push:function(t){let e=this.fn;this.value=e(this.value,t,this.i++,this)}});function mt(t,e,o){this.input=t,this.fn=e,this.value=o}mt.prototype=g(E(s.prototype),{push:function(t){let e=this.fn;this.value=e(this.value,t),this[0].push(this.value)}});function wt(t,e){this.input=t,this.push=e,t.pipe(this)}wt.prototype=g(E(s.prototype),{each:null,reduce:null,pipe:null});var ue=Array.prototype,ce=Object.assign,ae=Object.create;function k(t){this.buffer=t||[]}k.prototype=ce(ae(s.prototype),a.prototype,{push:function(t){t!==void 0&&this.buffer.push(t)},pipe:function(t){for(this[0]=t;this.buffer.length;)this[0].push(ue.shift.apply(this.buffer));return this.buffer=this[0],t}});var gt=Object.assign,pe=Promise.resolve(),fe={schedule:function(){pe.then(this.fire)},unschedule:f},le={schedule:function(){this.timer=requestAnimationFrame(this.fire)},unschedule:function(){cancelAnimationFrame(this.timer),this.timer=void 0}},he={schedule:function(){this.timer=setTimeout(this.fire,this.duration*1e3)},unschedule:function(){clearTimeout(this.timer),this.timer=void 0}};function H(t,e){s.apply(this,arguments),this.duration=e,this.timer=void 0,this.fire=()=>{this.timer=void 0,this.output.stop()},gt(this,e==="tick"?fe:e==="frame"?le:he)}gt(H.prototype,s.prototype,{push:function(t){this.timer?(this.unschedule(),this.schedule(),this.output.push(t)):(this.output=s.of(t),this[0].push(this.output),this.schedule())},stop:function(){this.timer&&this.fire(),s.prototype.stop.apply(this,arguments)}});var de=Object.assign,me=Object.create;function j(t,e){s.apply(this,arguments),this.memory=!!(e&&e.memory),e&&e.hot&&this.pipe(S)}j.prototype=de(me(s.prototype),{push:function(t){if(t!==void 0){this.memory&&(this.value=t);let e=-1;for(;this[++e];)this[e].push(t)}},pipe:function(t){let e=-1;for(;this[++e];);return this[e]=t,this.value!==void 0&&t.push(this.value),e===0&&this.input.pipe(this),t}});var we=Object.assign;function D(t){this.promise=t}we(D.prototype,a.prototype,{pipe:function(t){let e=this.promise;this[0]=t,e.then(o=>this[0].push(o)).finally(o=>this.stop())},stop:function(){a.prototype.stop.apply(this,arguments),this[0]=S}});var bt=Object.assign,vt=Object.keys;function yt(t,e,o){let i=t.values,r=t.names,c=t[0];i[e]=o,(t.active||(t.active=vt(i).length===r.length))&&c.push(bt({},i))}function F(t){this.inputs=t,this.active=!1}bt(F.prototype,a.prototype,{pipe:function(t){let e=this.inputs;this.values={},this.names=vt(e),this[0]=t;for(let o in e){let i=e[o];i.pipe?t.done(i.each(r=>yt(this,o,r))):i.then?i.then(r=>yt(this,o,r)):console.log("Todo: combine() raw values ?")}}});var ge=Object.assign;function U(t){this.inputs=t}ge(U.prototype,a.prototype,{pipe:function(t){let e=this.inputs;this[0]=t;let o=-1,i;for(;i=e[++o];)if(i.pipe)i.pipe(t);else if(i.then)i.then(r=>t.push(r));else{let r=-1;for(;++r<i.length;)t.push(i[r])}},stop:function(){let t=this.inputs,e=-1,o;for(;o=t[++e];)o.stop&&o.stop();return a.prototype.stop.apply(this,arguments)}});var J=Array.prototype,ye=Object.assign;function be(t){return t.length>0}function ve(t,e,o){return t[o]=e.shift(),t}function Ee(t){return[]}function Q(t,e,o,i){o.push(i),e.every(be)&&t.push(e.reduce(ve,{}))}function G(t){this.inputs=t,this.buffers=J.map.call(t,Ee)}ye(G.prototype,a.prototype,{pipe:function(t){let e=this.inputs,o=this.buffers;this[0]=t,J.forEach.call(e,(i,r)=>{let c=o[r];i.each?t.done(i.each(y=>Q(t,o,c,y))):i.then?i.then(y=>Q(t,o,c,y)):J.forEach.call(i,y=>Q(t,o,c,y))})},stop:function(){let t=this.inputs,e=-1,o;for(;o=t[++e];)o.stop();return a.prototype.stop.apply(this,arguments)}});var xe=Array.prototype,Et=Object.assign;function Te(t){throw new TypeError("Stream: invalid source object cannot be read into stream")}var xt=Et(s,{of:function(){return new k(xe.slice.apply(arguments))},from:function(t){return t.pipe?new s(t):t.then?new s(new D(t)):typeof t.length=="number"?new k(t):Te(t)},burst:function(e){return new H(S,e)},broadcast:function(e){return new j(S,e)},combine:function(e){return new s(new F(e))},merge:function(){return new s(new U(arguments))},zip:function(){return new s(new G(arguments))}});Et(s.prototype,{log:K,burst:function(t){return new H(this,t)},broadcast:function(t){return new j(this,t)}});var Se=Object.assign,Ae=/\s+/,Tt={fullscreenchange:"fullscreenElement"in document?"fullscreenchange":"webkitFullscreenElement"in document?"webkitfullscreenchange":"fullscreenchange"};var St=0;window.addEventListener("click",t=>St=t.timeStamp);function Le(t,e){return t.node.addEventListener(Tt[e]||e,t,t.options),t}function Pe(t,e){return t.node.removeEventListener(Tt[e]||e,t),t}function At(t,e,o){this.types=t.split(Ae),this.options=e,this.node=o,this.select=e&&e.select}Se(At.prototype,a.prototype,{pipe:function(t){this[0]=t,this.types.reduce(Le,this)},handleEvent:function(t){if(!(t.type==="click"&&t.timeStamp<=St)){if(this.select){let e=t.target.closest(this.select);if(!e)return;t.selectedTarget=e}this[0].push(t)}},stop:function(){this.types.reduce(Pe,this),a.prototype.stop.apply(this,arguments)}});function W(t,e){let o;return typeof t=="object"&&(o=t,t=o.type),new xt(new At(t,o,e))}function Me(t){return/^#\S+$/.test(t)}var Lt={construct:function(){let t=this.children,e=-1;for(;t[++e];){let o=t[e];if(new URL(o.value,window.location).href===window.location.href){this.value=o.value;break}}W("change",this).map(o=>o.target.value).filter(o=>!!o).each(o=>{if(Me(o)){let i=ref.slice(1);window.location.hash=i}else window.location=o})}};var no=import.meta.url.replace(/\/[^\/]*\.js/,"/location-select-shadow.css"),oo=q('<select is="location-select">',Lt);window.console&&window.console.log('%c<select is="location-select">%c registered (docs at %chttps://stephen.band/location-select/%c)',"color: #3a8ab0; font-weight: 600;","color: #888888; font-weight: 400;","color: inherit; font-weight: 400;","color: #888888; font-weight: 400;");export{oo as default};
